

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Handling Body Description and Mobility &mdash; PyLayers</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Table Of Content" href="../5-SIM/Corser.html" />
    <link rel="prev" title="Trajectory and Network simulation" href="Mobility.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Python
          

          
            
            <img src="../../_static/pylayers.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../TOC.html"><span class="sectnum">1</span> Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TOC.html#basic-usage"><span class="sectnum">2</span> Basic Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TOC.html#environment-description"><span class="sectnum">3</span> Environment Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TOC.html#materials-and-slabs"><span class="sectnum">4</span> Materials and Slabs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TOC.html#description-of-antennas"><span class="sectnum">5</span> Description of Antennas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TOC.html#coverage-simulation"><span class="sectnum">6</span> Coverage Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TOC.html#ray-tracing-simulation"><span class="sectnum">7</span> Ray Tracing Simulation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../TOC.html#handling-agent-mobility"><span class="sectnum">8</span> Handling Agent Mobility</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../5-SIM/SimulNetConfig.html">Network Simulation Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="Mobility.html">Trajectory and Network simulation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Handling Body Description and Mobility</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bodycylinder-data-structure"><code class="docutils literal notranslate"><span class="pre">BodyCylinder</span></code> data structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#description-of-a-body-file">Description of a body file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-of-a-body-file">Example of a Body file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#loading-a-motion-capture-file">Loading a Motion Capture File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defining-a-trajectory">Defining a trajectory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#centering-the-motion">Centering the motion</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defining-a-large-scale-trajectory">Defining a large scale trajectory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trajectory">Trajectory</a></li>
<li class="toctree-l4"><a class="reference internal" href="#posvel"><code class="docutils literal notranslate"><span class="pre">posvel()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#definition-of-several-coordinates-systems">Definition of Several Coordinates systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="#placing-a-dcs-device-coordinate-system-on-the-cylinder">Placing a dcs (Device Coordinate System ) on the cylinder</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../5-SIM/Corser.html">Table Of Content</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-SIM/Corser.html#motivation-for-creating-a-specific-tool">Motivation for creating a specific tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-SIM/Corser.html#prerequisite-installations">Prerequisite Installations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5-SIM/Corser.html#using-pylayers-ray-tracing-with-corser-data">Using Pylayers Ray-tracing with CorSer data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../TOC.html#other-simulation-examples"><span class="sectnum">9</span> Other Simulation Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TOC.html#localization-algorithms"><span class="sectnum">10</span> Localization Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TOC.html#measurements-tools"><span class="sectnum">11</span> Measurements Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../TOC.html#pylayers-tools"><span class="sectnum">12</span> PyLayers Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_exLayout1.html">Loading an outdoor layout from its address</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_antenna.html">Antenna Pattern for an H plane sectoral antenna &#64; 32GHz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_exLayout2.html">Building graphs of a Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_coverage.html">Indoor Radio Coverage with Motley Keenan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_layout.html">8 Random Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_issue314.html">Exemple of issue 314</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_exAbsGas.html">Attenuation due to atmospheric gases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_exDLink.html">Evaluation of a radio link DLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_w1.html">Indoor Radio Coverage FP7 WHERE1 M1 setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_exLuebbers.html">UWB Ray tracing simulation  in outdoor scenario</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_dakar.html">Outdoor Radio Coverage with Deygout Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_cover.html">Outdoor Radio Coverage with Deygout Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_diffraction_polar.html">Diffraction coefficient</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auto_examples/plot_diffraction.html">Diffraction coefficient</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">User Manual</a> &raquo;</li>
        
          <li><a href="../TOC.html"><span class="sectnum">1</span> Overview</a> &raquo;</li>
        
      <li>Handling Body Description and Mobility</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/notebook/4-MOB/Body.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="handling-body-description-and-mobility">
<h1>Handling Body Description and Mobility<a class="headerlink" href="#handling-body-description-and-mobility" title="Permalink to this headline">¶</a></h1>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>from pylayers.mobility.ban.body import *
from pylayers.mobility.trajectory import Trajectory
from IPython.display import Image
from matplotlib.pyplot import *
import pylayers.util.mayautil as mau
%matplotlib inline
</pre></div>
</div>
<p>The body mobility is imported from motion capture files. This is the
chosen manner to achieve a high degree of realism for the modeling of
the human motion. Two kind of files exist :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c3d</span></code> files are a set of point which are evolving in time</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bvh</span></code> files are a stuctured version of the motion capture.</p></li>
</ul>
<p>Both type of file will be exploited in the following.</p>
<div class="section" id="bodycylinder-data-structure">
<h2><code class="docutils literal notranslate"><span class="pre">BodyCylinder</span></code> data structure<a class="headerlink" href="#bodycylinder-data-structure" title="Permalink to this headline">¶</a></h2>
<p>To ease electromagnetic simulation a simplification of the motion
capture data structure is necessary. Generally there is a large number
of captured points, not all of them being useful for our modeling.</p>
<p>The body model is a restriction of key body segments which are
transformed into <span class="math notranslate nohighlight">\(K\)</span> cylinders of radius <span class="math notranslate nohighlight">\(r_k\)</span>.</p>
<p>The chosen body model is made of 11 cylinders. 4 cylinders decribing the
two arms, 4 cylinders decribing the two legs, 2 cylinders describing the
trunk and 1 cylinder for the head.</p>
<p>The body cylinder model is handled by the dedicated Python class call
<code class="docutils literal notranslate"><span class="pre">Body</span></code></p>
<p>To create a void body, simply instantiate a Body object from the class</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John = Body()
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>**** Processor coding : Intel-PC
</pre></div>
</div>
<p>which is equivalent to :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John = Body(_filebody=&#39;John.ini&#39;,_filemocap=&#39;07_01.c3d&#39;,unit=&#39;cm&#39;)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>**** Processor coding : Intel-PC
</pre></div>
</div>
<p>The default body filename is John.ini and the default motion capture
filename is ‘07_01.c3d’. The creation of a Body consists in reading a
<code class="docutils literal notranslate"><span class="pre">_filebody</span></code> and a <code class="docutils literal notranslate"><span class="pre">_filemocap</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John._show3()
mau.inotshow(&#39;John&#39;,doc=True)
</pre></div>
</div>
<img alt="../../_images/Body_7_0.png" src="../../_images/Body_7_0.png" />
</div>
<div class="section" id="description-of-a-body-file">
<h2>Description of a body file<a class="headerlink" href="#description-of-a-body-file" title="Permalink to this headline">¶</a></h2>
<p>An example of a body file is given below. It is a file in <code class="docutils literal notranslate"><span class="pre">ini</span></code> format
with 4 sections.</p>
<ul class="simple">
<li><p>[nodes]</p></li>
</ul>
<p>This section associates a node number to a c3d fils conventional node
number</p>
<ul class="simple">
<li><p>[cylinder]</p></li>
</ul>
<p>This section associates a cylinder Id to a dictionnary wich contains
cylinder tail head and radius information</p>
<ul class="simple">
<li><p>[device]</p></li>
</ul>
<p>This section associates a device name to a dictionnary wich contains
cylinder device related information</p>
</div>
<div class="section" id="example-of-a-body-file">
<h2>Example of a Body file<a class="headerlink" href="#example-of-a-body-file" title="Permalink to this headline">¶</a></h2>
<p>[nodes] 0 = [STRN,T10] 1 = [CLAV,C7] 2 = [RFHD,LFHD,LBHD,RBHD] 3 = RSHO
4 = LSHO 5 = [RRAD,RHUM] 6 = [LRAD,LHUM] 7 = [RWRA,RWRB] 8 = [LWRA,LWRB]
9 = [RFWT,RBWT] 10 = [LFWT,LBWT] 11 = [RKNE,RKNI] 12 = [LKNE,LKNI] 13 =
RANI 14 = LANI 15 = [RFWT, LFWT,LBWT,RBWT][cylinder] ; sternum (STRN) -
clavicle (CLAV) trunku = {‘t’:0,’h’:1,’r’:0.18,’i’:0} ; bottom (BOTT)
sternum (STRN) trunkb = {‘t’:15,’h’:0,’r’:0.17,’i’:10} ; clavicle (CLAV)
- head (RFHD) headu = {‘t’:1,’h’:2,’r’:0.12,’i’:1} ; right elbow (RELB)
right shoulder (RSHO) armr = {‘t’:5,’h’:3,’r’:0.05,’i’:2} ; left elbow
(LELB) left shoulder (LSHO) arml = {‘t’:6,’h’:4,’r’:0.05,’i’:3} ; right
wrist (RWRB) right elbow (RELB) forearmr = {‘t’:7,’h’:5,’r’:0.05,’i’:4}
; left wrist (LWRB) left elbow (LELB) forearml =
{‘t’:8,’h’:6,’r’:0.05,’i’:5} ; right knee (RKNE) right hip (RFWT) thighr
= {‘t’:11,’h’:9,’r’:0.05,’i’:6} ; left knee (LKNE) left hip (LFWT)
thighl = {‘t’:12,’h’:10,’r’:0.05,’i’:7} ; right ankle (RANK) right knee
(RKNE) calfr = {‘t’:13,’h’:11,’r’:0.05,’i’:8} ; left ankle (LANK) left
knee (LKNE) calfl = {‘t’:14,’h’:12,’r’:0.05,’i’:9} [wearable] file =
real_suit1.ini [mocap] file = serie_017_noDEC_Real.c3d ; unit of c3d
file unit = mm ; number of frame to consider. if -1 : all frames nframes
= -1</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Bernard = Body(_filebody=&#39;Bernard.ini&#39;,_filemocap=&#39;serie_017.c3d&#39;)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>**** Processor coding : Intel-PC
</pre></div>
</div>
</div>
<div class="section" id="loading-a-motion-capture-file">
<h2>Loading a Motion Capture File<a class="headerlink" href="#loading-a-motion-capture-file" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">.c3d</span></code> motion capture file is loaded with the method <strong>``loadC3D``</strong>
with as arguments the motion capture file and the number of frames to
load.</p>
<p>The motion is represented as a sequence of frames stored in the
<strong>``d``</strong> variable member.</p>
<p>It is possible to get the information from the C3D header by using the
verbose option of the <code class="docutils literal notranslate"><span class="pre">read_c3d</span></code> function</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Video Frame Rate
Vrate = 120
# Inter Frame
Tframe = 1./120
# select a number of frame
nframes = 300
# Time duration of the whole selected frame sequence
Tfseq = Tframe*nframes
#
# load a .c3dmotion capture file
# this update the g.pos
#
#bc.loadC3D(filename=&#39;07_01.c3d&#39;,nframes=nframes,centered=True)
</pre></div>
</div>
<p>The duration of the capture is</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>print &quot;Duration of the motion capture sequence&quot;, Tfseq,&quot; seconds&quot;
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Duration of the motion capture sequence 2.5  seconds
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">d</span></code> is a MDA of shape <code class="docutils literal notranslate"><span class="pre">(3,npoint,nframe)</span></code>. It contains all the
possible configurations of the body. In general it is supposed to be a
cyclic motion as an integer number of walking steps. This allows to
instantiate the body configuration anywhere else in space in a given
trajectory.</p>
<p>A specific space-time configuration of the body is called a
<strong>``topos``</strong>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>np.shape(Bernard.d)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(3, 16, 11213)
</pre></div>
</div>
</div>
<div class="section" id="defining-a-trajectory">
<h2>Defining a trajectory<a class="headerlink" href="#defining-a-trajectory" title="Permalink to this headline">¶</a></h2>
<p>A Trajectory is a class which :</p>
<ul class="simple">
<li><p>derives from a pandas <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></p></li>
<li><p>is a container for time,position,velocity and acceleration.</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>traj = Trajectory()
</pre></div>
</div>
<p>To define a default trajectory :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>t = traj.generate()
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>print traj.columns
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Index([u&#39;x&#39;, u&#39;y&#39;, u&#39;z&#39;, u&#39;vx&#39;, u&#39;vy&#39;, u&#39;vz&#39;, u&#39;ax&#39;, u&#39;ay&#39;, u&#39;az&#39;, u&#39;s&#39;, u&#39;t&#39;], dtype=&#39;object&#39;)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>traj.head()
</pre></div>
</div>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>z</th>
      <th>vx</th>
      <th>vy</th>
      <th>vz</th>
      <th>ax</th>
      <th>ay</th>
      <th>az</th>
      <th>s</th>
      <th>t</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1970-01-01 00:00:00.000000</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-0.675584</td>
      <td>0.299813</td>
      <td>1.0</td>
      <td>4.696639</td>
      <td>-0.005505</td>
      <td>0.0</td>
      <td>-37.557977</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1970-01-01 00:00:00.204082</th>
      <td>0.061186</td>
      <td>0.204082</td>
      <td>0.282914</td>
      <td>0.298689</td>
      <td>1.0</td>
      <td>-2.968254</td>
      <td>-0.010989</td>
      <td>0.0</td>
      <td>19.938054</td>
      <td>0.213056</td>
      <td>0.204082</td>
    </tr>
    <tr>
      <th>1970-01-01 00:00:00.408163</th>
      <td>0.122143</td>
      <td>0.408163</td>
      <td>-0.322852</td>
      <td>0.296446</td>
      <td>1.0</td>
      <td>1.100737</td>
      <td>-0.016433</td>
      <td>0.0</td>
      <td>-17.065929</td>
      <td>0.426047</td>
      <td>0.408163</td>
    </tr>
    <tr>
      <th>1970-01-01 00:00:00.612245</th>
      <td>0.182642</td>
      <td>0.612245</td>
      <td>-0.098212</td>
      <td>0.293093</td>
      <td>1.0</td>
      <td>-2.382106</td>
      <td>-0.021814</td>
      <td>0.0</td>
      <td>-3.969265</td>
      <td>0.638907</td>
      <td>0.612245</td>
    </tr>
    <tr>
      <th>1970-01-01 00:00:00.816327</th>
      <td>0.242457</td>
      <td>0.816327</td>
      <td>-0.584356</td>
      <td>0.288641</td>
      <td>1.0</td>
      <td>-3.192160</td>
      <td>-0.027114</td>
      <td>0.0</td>
      <td>65.114746</td>
      <td>0.851574</td>
      <td>0.816327</td>
    </tr>
  </tbody>
</table>
</div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>f,a = traj.plot()
</pre></div>
</div>
<img alt="../../_images/Body_22_0.png" src="../../_images/Body_22_0.png" />
<div class="section" id="settopos-method">
<h3>settopos () method<a class="headerlink" href="#settopos-method" title="Permalink to this headline">¶</a></h3>
<p>Once the trajectory has been defined it is possible to send the body at
the position corresponding to any time of the trajectory with the
<strong>``settopos``</strong> method.</p>
<p>settopos takes as argument</p>
<ul class="simple">
<li><p>A trajectory</p></li>
<li><p>A time index</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>traj.__repr__()
</pre></div>
</div>
<pre class="literal-block">'Trajectory of agent MyNameIsNoBody with ID 1n--------------------------------------------nt (s) : 0.00 : 0.20 : 9.59ndtot (m) : 9.79nVmoy (m/s) : 1.02n                                   x         y         z        vx   vy  \n1970-01-01 00:00:00.000000  0.000000  0.000000 -0.675584  0.299813  1.0   n1970-01-01 00:00:00.204082  0.061186  0.204082  0.282914  0.298689  1.0   nn                                  vz        ax   ay         az         s  \n1970-01-01 00:00:00.000000  4.696639 -0.005505  0.0 -37.557977  0.000000   n1970-01-01 00:00:00.204082 -2.968254 -0.010989  0.0  19.938054  0.213056   nn                                   t  n1970-01-01 00:00:00.000000  0.000000  n1970-01-01 00:00:00.204082  0.204082  n'</pre>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.settopos(traj,t=5)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>plt.figure(figsize=(15,20))
for t in np.arange(traj.tmin+0.4,traj.tmax,0.5):
   John.settopos(traj,t=t)
   f,a=John.show(color=&#39;b&#39;,plane=&#39;yz&#39;,topos=True)
   axis(&#39;off&#39;)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/home/uguen/Documents/rch/devel/pylayers/pylayers/mobility/ban/body.py:2124: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future
  pta =  np.array([self.topos[ax1, kta], self.topos[ax2, kta]])[:,np.newaxis]
/home/uguen/Documents/rch/devel/pylayers/pylayers/mobility/ban/body.py:2125: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future
  phe =  np.array([self.topos[ax1, khe], self.topos[ax2, khe]])[:,np.newaxis]
</pre></div>
</div>
<img alt="../../_images/Body_26_1.png" src="../../_images/Body_26_1.png" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>My name is : John

I have a Galaxy Gear device with id #1 on the left forearm witn antenna defant.vsh3
I have a cardio device with id #0 on the upper part of trunk witn antenna defant.vsh3

@ t=0.708333333333 (frameID=85),
My centroid position is [-7.87435024  5.23416696]

filewear : suit2.ini
filename : 07_01.c3d
nframes : 316
Centered : True
Mocap Speed : 13.649 m/s
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Francois = Body(_filebody=&#39;Francois.ini&#39;)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>**** Processor coding : Intel-PC
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Francois.settopos(traj,t=6)
</pre></div>
</div>
<ul class="simple">
<li><p>3 : dimension of space</p></li>
<li><p>16 : number of nodes</p></li>
<li><p>300 : number of frames</p></li>
</ul>
<p>The figure below shows the projection in a vertival plane of the body
nodes.</p>
</div>
</div>
<div class="section" id="centering-the-motion">
<h2>Centering the motion<a class="headerlink" href="#centering-the-motion" title="Permalink to this headline">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.centered
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<p>In order to translate the motion in any point in space-time, a
distinction is made between the real motion or topos and the centered
motion capture which acts as a virtual motion.</p>
<p>Let <span class="math notranslate nohighlight">\(\mathbf{p}^k\)</span> denotes the center of gravity of the body in
the (O,x,y) plane</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.center()
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>a = np.hstack((John.vg,John.vg[:,-1][:,np.newaxis]))
</pre></div>
</div>
<p><span class="math notranslate nohighlight">\(\mathbf{v}_g\)</span> is the velocity vector of the gravity center of the
body.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>print np.shape(John.pg)
print np.shape(John.vg)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(3, 316)
(3, 316)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>print John.vg[:,145]
print John.vg[:,298]
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[ 0.11498696 -0.00263353  0.        ]
[ 0.10812351  0.00072441  0.        ]
</pre></div>
</div>
<p>At that point the body structure is centered.</p>
<p>The frame is centered in the xy plane by substracting from the
configuration of points the projection of the body in the xy plane.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>np.shape(John.d)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(3, 16, 316)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.npoints
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>16
</pre></div>
</div>
<p>Each frame is centered above the origin. For example for a walk motion
the effect of the centering is just like if the body was still walking
but not moving forward exactly in the same manner as a walk on a
conveyor belt.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pgc = np.sum(John.d[:,:,0],axis=1)/16
pg0 = John.pg[:,0]
print &quot;True center of gravity&quot;, pg0
print &quot;Center of gravity of the centered frame&quot;,pgc
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>True center of gravity [-17.42515686   4.93730766   0.        ]
Center of gravity of the centered frame [  4.44089210e-16  -1.05471187e-15   8.94887349e+00]
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>np.shape(John.pg)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(3, 316)
</pre></div>
</div>
<p>The current file contains 300 frames</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tframe = np.arange(John.nframes)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>np.shape(John.pg[0:-1,:])
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(2, 316)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>xg = John.pg[0,:]
yg = John.pg[1,:]
zg = John.pg[2,:]
figure(figsize=(8,8))
subplot(311)
plot(tframe,xg)
title(&#39;x component&#39;)
ylabel(&#39;m&#39;)
subplot(312)
xlabel(&#39;frame index&#39;)
title(&#39;y component&#39;)
ylabel(&#39;m&#39;)
plot(tframe,yg)
subplot(313)
xlabel(&#39;frame index&#39;)
title(&#39;Motion capture centroid trajectory&#39;)
ylabel(&#39;m&#39;)
plot(xg,yg,&#39;.b&#39;)

d = John.pg[0:-1,1:]-John.pg[0:-1,0:-1]
smocap = np.cumsum(np.sqrt(np.sum(d*d,axis=0)))

Vmocap = smocap[-1]/Tfseq
title(&#39;Length = &#39;+str(smocap[-1])+&#39; V = &#39;+str(Vmocap*3.6)+&#39; km/h&#39;)
axis(&#39;scaled&#39;)
axis(&#39;off&#39;)
plt.tight_layout()
</pre></div>
</div>
<img alt="../../_images/Body_47_0.png" src="../../_images/Body_47_0.png" />
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>plot(smocap)
title(&#39;evolution of curvilinear abscisse from motion capture centroid trajectory&#39;)
xlabel(&#39;frame index&#39;)
ylabel(&#39;distance (meters)&#39;)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.text.Text at 0x7f76a3e770d0&gt;
</pre></div>
</div>
<img alt="../../_images/Body_48_1.png" src="../../_images/Body_48_1.png" />
</div>
<div class="section" id="defining-a-large-scale-trajectory">
<h2>Defining a large scale trajectory<a class="headerlink" href="#defining-a-large-scale-trajectory" title="Permalink to this headline">¶</a></h2>
<p>A large scale trajectory is defined in the <span class="math notranslate nohighlight">\((O,x,y)\)</span> plane.</p>
<p><code class="docutils literal notranslate"><span class="pre">traj</span></code> is a data structure (Npt,2)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>v = Vmocap
print v*3.6,&quot;Kmph&quot;
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>51.5920052862 Kmph
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># time in seconds
time = np.arange(0,10,0.01)
x = v*time
y = np.zeros(len(time))
z = np.zeros(len(time))
traj = Trajectory()
traj.generate()
traj.tmax
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>9.591837
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>fig ,ax = traj.plot()
traj.head()
</pre></div>
</div>
<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>x</th>
      <th>y</th>
      <th>z</th>
      <th>vx</th>
      <th>vy</th>
      <th>vz</th>
      <th>ax</th>
      <th>ay</th>
      <th>az</th>
      <th>s</th>
      <th>t</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1970-01-01 00:00:00.000000</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>-1.165661</td>
      <td>0.299813</td>
      <td>1.0</td>
      <td>4.511480</td>
      <td>-0.005505</td>
      <td>0.0</td>
      <td>23.463223</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1970-01-01 00:00:00.204082</th>
      <td>0.061186</td>
      <td>0.204082</td>
      <td>-0.244951</td>
      <td>0.298689</td>
      <td>1.0</td>
      <td>9.299893</td>
      <td>-0.010989</td>
      <td>0.0</td>
      <td>-115.745339</td>
      <td>0.213056</td>
      <td>0.204082</td>
    </tr>
    <tr>
      <th>1970-01-01 00:00:00.408163</th>
      <td>0.122143</td>
      <td>0.408163</td>
      <td>1.652986</td>
      <td>0.296446</td>
      <td>1.0</td>
      <td>-14.321605</td>
      <td>-0.016433</td>
      <td>0.0</td>
      <td>92.672156</td>
      <td>0.426047</td>
      <td>0.408163</td>
    </tr>
    <tr>
      <th>1970-01-01 00:00:00.612245</th>
      <td>0.182642</td>
      <td>0.612245</td>
      <td>-1.269790</td>
      <td>0.293093</td>
      <td>1.0</td>
      <td>4.591080</td>
      <td>-0.021814</td>
      <td>0.0</td>
      <td>-24.088894</td>
      <td>0.638907</td>
      <td>0.612245</td>
    </tr>
    <tr>
      <th>1970-01-01 00:00:00.816327</th>
      <td>0.242457</td>
      <td>0.816327</td>
      <td>-0.332835</td>
      <td>0.288641</td>
      <td>1.0</td>
      <td>-0.325021</td>
      <td>-0.027114</td>
      <td>0.0</td>
      <td>30.057229</td>
      <td>0.851574</td>
      <td>0.816327</td>
    </tr>
  </tbody>
</table>
</div><img alt="../../_images/Body_52_1.png" src="../../_images/Body_52_1.png" />
</div>
<div class="section" id="trajectory">
<h2>Trajectory<a class="headerlink" href="#trajectory" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="posvel">
<h2><code class="docutils literal notranslate"><span class="pre">posvel()</span></code><a class="headerlink" href="#posvel" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">posvel()</span></code> method (position and velocity) takes as arguments the
following parameters</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">traj</span></code> a plane trajectory object.</p></li>
<li><p><span class="math notranslate nohighlight">\(t_k\)</span> time for evaluation of topos</p></li>
<li><p><span class="math notranslate nohighlight">\(T_{fs}\)</span> duration of the periodic motion frame sequence</p></li>
</ul>
<p>and returns</p>
<ul class="simple">
<li><p>the frame index
<span class="math notranslate nohighlight">\(k_f = \lfloor \frac{t_k \pmod{T_{fs}}}{t_f} \rfloor\)</span></p></li>
<li><p>the trajectory index <span class="math notranslate nohighlight">\(k_t = \lfloor t_k \rfloor\)</span></p></li>
<li><p>velocity unitary vector along motion capture frame
<span class="math notranslate nohighlight">\(\hat{\mathbf{v}}_s = \frac{\mathbf{p}^g[k_f]-\mathbf{p}^g[k_f-1]}{|\mathbf{p}^g[k_f]-\mathbf{p}^g[k_f-1]|}\)</span></p></li>
<li><p>$:raw-latex:<cite>hat{mathbf{w}}</cite>_s = <a href="#id9"><span class="problematic" id="id10">:raw-latex:`\mathbf{\hat{z}}`</span></a>
<a href="#id11"><span class="problematic" id="id12">:raw-latex:`\times  `:raw-latex:`</span></a>hat{mathbf{v}}`_s $</p></li>
<li><p>velocity unitary vector along trajectory
<span class="math notranslate nohighlight">\(\hat{\mathbf{v}}_t = \frac{\mathbf{p}^t[k_t]-\mathbf{p}^g[k_t-1]}{|\mathbf{p}^g[k_t]-\mathbf{p}^t[k_t-1]|}\)</span></p></li>
<li><p>$:raw-latex:<cite>hat{mathbf{w}}</cite>_t = <a href="#id13"><span class="problematic" id="id14">:raw-latex:`\mathbf{\hat{z}}`</span></a>
<a href="#id15"><span class="problematic" id="id16">:raw-latex:`\times  `:raw-latex:`</span></a>hat{mathbf{v}}`_t $</p></li>
</ul>
<p><span class="math notranslate nohighlight">\(t_f = \frac{T_{fs}}{Nf}\)</span> is the interframe time or frame sampling
period, it is equal to the whole duration of the motion sequence
<span class="math notranslate nohighlight">\(T_{fs}\)</span> divided by the number of frames</p>
<p><code class="docutils literal notranslate"><span class="pre">settopos</span></code> is a method which takes as argument :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">traj</span></code> a plane trajectory (Npt,2)</p></li>
<li><p><span class="math notranslate nohighlight">\(t_k\)</span> time for evaluation of topos</p></li>
</ul>
<p>In further version of the class, this function will be modified to avoid
passing the whole trajectory.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.settopos(traj=traj,t=3)
</pre></div>
</div>
<p>There is now a new data structure in the Body objet. This data structure
is called a <code class="docutils literal notranslate"><span class="pre">topos</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>print np.shape(John.topos)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(3, 16)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.topos
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>array([[  0.74198686,   0.76931593,   1.80846633,   2.26719915,
         -0.91675363,   3.25586636,  -1.86053098,   3.82194596,
         -2.06245933,   2.15021298,  -0.55180885,   2.02586803,
         -0.94510502,   1.36586716,  -0.57366714,   0.79920206],
       [  3.75720113,   3.13644711,   2.8414143 ,   2.20063108,
          2.6901425 ,   1.78826275,   3.20212316,   1.7696506 ,
          4.042258  ,   3.29688912,   3.60268634,   2.76571804,
          3.90430304,   2.24259271,   1.0241781 ,   3.44978773],
       [ 12.24457275,  13.88075684,  16.00988037,  14.0978418 ,
         14.3736377 ,  10.74208496,  11.07206543,   7.98268372,
          8.47460388,   9.31935974,   9.1988916 ,   4.30262299,
          4.54000305,   0.44698982,   1.7794635 ,   9.25912567]])
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.settopos(traj=traj,t=1)
fig,ax=John.plot3d(topos=True,col=&#39;#87CEEB&#39;)
John.settopos(traj=traj,t=2)
John.plot3d(topos=True,fig=fig,ax=ax,col=&#39;#7EC0EE&#39;)
John.settopos(traj=traj,t=3)
John.plot3d(topos=True,fig=fig,ax=ax,col=&#39;#6A5ACD&#39;)
John.settopos(traj=traj,t=4)
John.plot3d(topos=True,fig=fig,ax=ax,col=&#39;#7A67EE&#39;)
John.settopos(traj=traj,t=5)
John.plot3d(topos=True,fig=fig,ax=ax,col=&#39;#473C8B&#39;)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/home/uguen/Documents/rch/devel/pylayers/pylayers/mobility/ban/body.py:1768: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future
  pA = self.topos[:, e0].reshape(3,1)
/home/uguen/Documents/rch/devel/pylayers/pylayers/mobility/ban/body.py:1769: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future
  pB = self.topos[:, e1].reshape(3,1)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(&lt;matplotlib.figure.Figure at 0x7f76aef51390&gt;,
 &lt;matplotlib.axes._subplots.Axes3DSubplot at 0x7f76a38399d0&gt;)
</pre></div>
</div>
<img alt="../../_images/Body_58_2.png" src="../../_images/Body_58_2.png" />
</div>
<div class="section" id="definition-of-several-coordinates-systems">
<h2>Definition of Several Coordinates systems<a class="headerlink" href="#definition-of-several-coordinates-systems" title="Permalink to this headline">¶</a></h2>
<p>Each cylinder of the <code class="docutils literal notranslate"><span class="pre">Body</span></code> model bears one specific coordinate
system.</p>
<p>One or several cylinder coordinate systems can be chosen to define the
Body Local Coordinates System (BLCS) which is required for motion
capture (BLCS) applications.</p>
<p>In general, the origin will be chosen on a position which is the most
time invariant as on the chest or the back.</p>
<p>Those frames of references are all defined in the Global Coordinate
System (GCS) of the scene.</p>
<div class="section" id="construction-of-the-cylinder-coordinate-system-ccs">
<h3>Construction of the Cylinder Coordinate System (CCS)<a class="headerlink" href="#construction-of-the-cylinder-coordinate-system-ccs" title="Permalink to this headline">¶</a></h3>
<p>The method <code class="docutils literal notranslate"><span class="pre">setccs()</span></code> is used to associate a Cylinder Coordinate
System (CCS) to each cylinder of the bodyCylinder model. Notice that
those cylinders coordinates systems are not known by the localization
application. The localization application will define the BLCS from the
position of radiating devices placed on the body surface.</p>
<p>Each basis is constructed with the function from
<code class="docutils literal notranslate"><span class="pre">geomutil.onbfromaxe()</span></code> : orthonormal bases from axes. This function
takes 2 sets of <span class="math notranslate nohighlight">\(n\)</span> points <span class="math notranslate nohighlight">\(\mathbf{p}_{A,n}\)</span> and
<span class="math notranslate nohighlight">\(\mathbf{p}_{B,n}\)</span> as input and provides an orthonormal basis as
output.</p>
<p>3 unitary vectors are constructed :</p>
<div class="math notranslate nohighlight">
\[\hat{\mathbf{w}}_n = \frac{\mathbf{p}_B-\mathbf{p}_A}{| \mathbf{p}_B-\mathbf{p}_A |}\]</div>
<div class="math notranslate nohighlight">
\[\hat{\mathbf{u}}_n = \frac{\hat{\mathbf{v}}_g - (\hat{\mathbf{v}}_g.{\hat{\mathbf{w}}_n}) \mathbf{\hat{w}}_n}{|\hat{\mathbf{v}_g} - (\hat{\mathbf{v}_g}.{\hat{\mathbf{w}}_n}) \mathbf{\hat{w}}_n|}\]</div>
<div class="math notranslate nohighlight">
\[\hat{\mathbf{v}}_n = \mathbf{\hat{w}}_n \times \mathbf{\hat{u}}_n\]</div>
<p>Where <span class="math notranslate nohighlight">\(\hat{\mathbf{v}}_g\)</span> is the unit velocity vector along
actual trajectory.</p>
<p>The outpout of <code class="docutils literal notranslate"><span class="pre">geomutil.onbframe</span></code> is an MDA
<span class="math notranslate nohighlight">\((3\times n \times 3)\)</span> of <span class="math notranslate nohighlight">\(n\)</span> unitary matrices aggregated
along axis 1</p>
<div class="math notranslate nohighlight">
\[\mathbf{T}_n=[\hat{\mathbf{u}}_n, \hat{\mathbf{v}}_n, \hat{\mathbf{w}}_n]\]</div>
<p>To create the CCS :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.setccs()
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import scipy.linalg as la
print &quot;ccs dimensions : &quot;,np.shape(John.ccs)
print John.ccs[0,:,:]
print &quot;Check determinant : &quot;, la.det(John.ccs[0,:,:])
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ccs dimensions :  (11, 3, 3)
[[ 0.94678656  0.05306765 -0.31745715]
 [-0.06834689  0.99696857 -0.03718026]
 [ 0.31452173  0.05689898  0.94754345]]
Check determinant :  1.0
</pre></div>
</div>
<p>Create a Wireframe body representation from the body graph model</p>
</div>
</div>
<div class="section" id="placing-a-dcs-device-coordinate-system-on-the-cylinder">
<h2>Placing a dcs (Device Coordinate System ) on the cylinder<a class="headerlink" href="#placing-a-dcs-device-coordinate-system-on-the-cylinder" title="Permalink to this headline">¶</a></h2>
<p>A DCS is refered by 4 numbers <span class="math notranslate nohighlight">\((Id,l,h,\alpha)\)</span></p>
<ul class="simple">
<li><p>Id : Cylinder Id</p></li>
<li><p>l : length along cylinder</p></li>
<li><p>h : height above cylinder generatrix</p></li>
<li><p>alpha : angle from front direction (degrees)</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Id = 4 # 4 Left Arm
l  = 0.1 # Longitudinal coordinates
h  = 0.03 # height
alpha = 45 # angle degrees
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.dcyl
{&#39;arml&#39;: 3,
 &#39;armr&#39;: 2,
 &#39;calfl&#39;: 9,
 &#39;calfr&#39;: 8,
 &#39;forearml&#39;: 5,
 &#39;forearmr&#39;: 4,
 &#39;headu&#39;: 1,
 &#39;thighl&#39;: 7,
 &#39;thighr&#39;: 6,
 &#39;trunkb&#39;: 10,
 &#39;trunku&#39;: 0}
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;arml&#39;: 3,
 &#39;armr&#39;: 2,
 &#39;calfl&#39;: 9,
 &#39;calfr&#39;: 8,
 &#39;forearml&#39;: 5,
 &#39;forearmr&#39;: 4,
 &#39;headu&#39;: 1,
 &#39;thighl&#39;: 7,
 &#39;thighr&#39;: 6,
 &#39;trunkb&#39;: 10,
 &#39;trunku&#39;: 0}
</pre></div>
</div>
<p>Rotate Matrix around z</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.settopos(traj=traj,t=6,cs=True)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.dcyl
{&#39;arml&#39;: 3,
 &#39;armr&#39;: 2,
 &#39;calfl&#39;: 9,
 &#39;calfr&#39;: 8,
 &#39;forearml&#39;: 5,
 &#39;forearmr&#39;: 4,
 &#39;headu&#39;: 1,
 &#39;thighl&#39;: 7,
 &#39;thighr&#39;: 6,
 &#39;trunkb&#39;: 10,
 &#39;trunku&#39;: 0}
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;arml&#39;: 3,
 &#39;armr&#39;: 2,
 &#39;calfl&#39;: 9,
 &#39;calfr&#39;: 8,
 &#39;forearml&#39;: 5,
 &#39;forearmr&#39;: 4,
 &#39;headu&#39;: 1,
 &#39;thighl&#39;: 7,
 &#39;thighr&#39;: 6,
 &#39;trunkb&#39;: 10,
 &#39;trunku&#39;: 0}
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.show3(topos=True,dcs=True)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/home/uguen/Documents/rch/devel/pylayers/pylayers/antprop/antenna.py:1715: RuntimeWarning: divide by zero encountered in log10
  self.GdB = 10*np.log10(self.G)
/home/uguen/Documents/rch/devel/pylayers/pylayers/mobility/ban/body.py:2294: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future
  pA = self.topos[:,e0].reshape(3,1)
/home/uguen/Documents/rch/devel/pylayers/pylayers/mobility/ban/body.py:2295: VisibleDeprecationWarning: using a non-integer number instead of an integer will result in an error in the future
  pB = self.topos[:,e1].reshape(3,1)
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>John.show3(topos=True,pattern=True)
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../5-SIM/Corser.html" class="btn btn-neutral float-right" title="Table Of Content" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Mobility.html" class="btn btn-neutral float-left" title="Trajectory and Network simulation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, PyLayers developer team
      <span class="lastupdated">
        Last updated on Apr 02, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>