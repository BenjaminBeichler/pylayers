

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pylayers.signal.waveform &mdash; PyLayers</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Python
          

          
            
            <img src="../../../_static/pylayers.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../notebook/index.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_exLayout1.html">Loading an outdoor layout from its address</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_antenna.html">Antenna Pattern for an H plane sectoral antenna &#64; 32GHz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_exLayout2.html">Building graphs of a Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_coverage.html">Indoor Radio Coverage with Motley Keenan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_layout.html">8 Random Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_issue314.html">Exemple of issue 314</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_exAbsGas.html">Attenuation due to atmospheric gases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_exDLink.html">Evaluation of a radio link DLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_w1.html">Indoor Radio Coverage FP7 WHERE1 M1 setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_exLuebbers.html">UWB Ray tracing simulation  in outdoor scenario</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_diffraction_polar.html">Diffraction coefficient</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_diffraction.html">Diffraction coefficient</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html">1&nbsp;&nbsp;&nbsp;pylayers.util.project Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.gis.layout">2&nbsp;&nbsp;&nbsp;pylayers.gis.layout Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.gis.selectl">3&nbsp;&nbsp;&nbsp;pylayers.gis.selectl Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.gis.srtm">4&nbsp;&nbsp;&nbsp;pylayers.gis.srtm Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.gis.osmparser">5&nbsp;&nbsp;&nbsp;pylayers.gis.osmparser Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.gis.ezone">6&nbsp;&nbsp;&nbsp;pylayers.gis.ezone Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.antenna">7&nbsp;&nbsp;&nbsp;pylayers.antprop.antenna Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.aarray">8&nbsp;&nbsp;&nbsp;pylayers.antprop.aarray Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.spharm">9&nbsp;&nbsp;&nbsp;pylayers.antprop.spharm Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.antssh">10&nbsp;&nbsp;&nbsp;pylayers.antprop.antssh Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.antvsh">11&nbsp;&nbsp;&nbsp;pylayers.antprop.antvsh Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.slab">12&nbsp;&nbsp;&nbsp;pylayers.antprop.slab Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.signature">13&nbsp;&nbsp;&nbsp;pylayers.antprop.signature Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.interactions">14&nbsp;&nbsp;&nbsp;pylayers.antprop.interactions Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.diffraction">15&nbsp;&nbsp;&nbsp;pylayers.antprop.diffraction Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.diffRT">16&nbsp;&nbsp;&nbsp;pylayers.antprop.diffRT Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.rays">17&nbsp;&nbsp;&nbsp;pylayers.antprop.rays Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.loss">18&nbsp;&nbsp;&nbsp;pylayers.antprop.loss Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.channel">19&nbsp;&nbsp;&nbsp;pylayers.antprop.channel Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#id39">20&nbsp;&nbsp;&nbsp;pylayers.antprop.loss Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.coverage">21&nbsp;&nbsp;&nbsp;pylayers.antprop.coverage Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.antprop.coeffModel">22&nbsp;&nbsp;&nbsp;pylayers.antprop.coeffModel Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.simul.link">23&nbsp;&nbsp;&nbsp;pylayers.simul.link Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.simul.exploit">24&nbsp;&nbsp;&nbsp;pylayers.simul.exploit Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.simul.exploit_simulnet">25&nbsp;&nbsp;&nbsp;pylayers.simul.exploit_simulnet Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.simul.simulnet">26&nbsp;&nbsp;&nbsp;pylayers.simul.simulnet Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.simul.simultraj">27&nbsp;&nbsp;&nbsp;pylayers.simul.simultraj Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.exploit.simnet">28&nbsp;&nbsp;&nbsp;pylayers.exploit.simnet Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.measures.mesuwb">29&nbsp;&nbsp;&nbsp;pylayers.measures.mesuwb Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.measures.mesmimo">30&nbsp;&nbsp;&nbsp;pylayers.measures.mesmimo Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.measures.cormoran">31&nbsp;&nbsp;&nbsp;pylayers.measures.cormoran Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.measures.vna.E5072A">32&nbsp;&nbsp;&nbsp;pylayers.measures.vna.E5072A Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.measures.parker.smparker">33&nbsp;&nbsp;&nbsp;pylayers.measures.parker.smparker Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.signal.bsignal">34&nbsp;&nbsp;&nbsp;pylayers.signal.bsignal Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.signal.standard">35&nbsp;&nbsp;&nbsp;pylayers.signal.standard Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.signal.device">36&nbsp;&nbsp;&nbsp;pylayers.signal.device Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.signal.DF">37&nbsp;&nbsp;&nbsp;pylayers.signal.DF Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.signal.waveform">38&nbsp;&nbsp;&nbsp;pylayers.signal.waveform Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.mobility.agent">39&nbsp;&nbsp;&nbsp;pylayers.mobility.agent Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#module-pylayers.mobility.ban.body">40&nbsp;&nbsp;&nbsp;pylayers.mobility.ban.body Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/references.html#id138">41&nbsp;&nbsp;&nbsp;pylayers.measures.cormoran Module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>pylayers.signal.waveform</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pylayers.signal.waveform</h1><div class="highlight"><pre>
<span></span># -*- coding:Utf-8 -*-
import doctest
import os
import logging
import pdb
import sys
import numpy as np
import scipy as sp
import scipy.io as io
import scipy.signal as si
import scipy.linalg as la
import matplotlib.pylab as plt
import pylayers.signal.bsignal as bs
from pylayers.measures import mesuwb

<div class="viewcode-block" id="Waveform"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform">[docs]</a>class Waveform(dict):
    &quot;&quot;&quot;

    Attributes
    ----------

    st  : time domain
    sf  : frequency domain
    sfg : frequency domain integrated

    Methods
    -------

    eval
    showpsd
    ip_generic
    fromfile
    fromfile2
    read
    gui
    show

    &quot;&quot;&quot;
    def __init__(self,**kwargs):
        &quot;&quot;&quot;

        Parameters
        ----------

        &#39;typ&#39; : string
            &#39;generic&#39;,
         &#39;WGHz&#39;: float
            0.499
         &#39;fcGHz&#39;: float
            4.493
         &#39;fsGHz&#39;: float
            100,
         &#39;threshdB&#39;:
              3,
         &#39;twns&#39;: float
            30

        typ  :  &#39;generic&#39;,&#39;W1compensate&#39;,&#39;W1offset&#39;

        &quot;&quot;&quot;
        defaults = {&#39;typ&#39;:&#39;generic&#39;,
                &#39;fGHz&#39;:[],
                &#39;WGHz&#39;: 0.499,
                &#39;fcGHz&#39;: 4.493,
                &#39;fsGHz&#39;: 100,
                &#39;threshdB&#39;: 3,
                &#39;twns&#39;: 30}

        for key, value in defaults.items():
            if key not in kwargs:
                self[key] = value
            else:
                self[key] = kwargs[key]
        self.eval()

<div class="viewcode-block" id="Waveform.eval"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform.eval">[docs]</a>    def eval(self):
        u&quot;&quot;&quot; evaluate waveform

        The :math:`\lambda/4*\pi` factor which is necessary to get the proper budget
        link ( from the Friis formula) is introduced in this function.

        &quot;&quot;&quot;

        if self[&#39;typ&#39;]  == &#39;generic&#39;:
            [st,sf]=self.ip_generic()
        #elif self[&#39;typ&#39;]  == &#39;mbofdm&#39;:
        #    [st,sf]=self.mbofdm()
        elif self[&#39;typ&#39;] == &#39;W1compensate&#39;:
            [st,sf]=self.fromfile()
        elif self[&#39;typ&#39;] == &#39;W1offset&#39;:
            [st,sf]=self.fromfile2()
        elif self[&#39;typ&#39;] == &#39;blackmann&#39;:
            sf = bs.FUsignal(x=fGHz,y=np.blackman(len(fGHz)))
            st = sf.ift()
        elif self[&#39;typ&#39;] == &#39;rect&#39;:
            sf = bs.FUsignal(x=fGHz,y=np.ones(len(fGHz)))
            st = sf.ift()
        elif self[&#39;typ&#39;] == &#39;hamming&#39;:
            sf = bs.FUsignal(x=fGHz,y=np.hamming(len(fGHz)))
            st = sf.ift()
        elif self[&#39;typ&#39;] == &#39;ref156&#39;:
            [st,sf] = self.ref156()
        else:
            logging.critical(&#39;waveform typ not recognized, check your config \
                             file&#39;)

        self.st       = st
        self.sf       = sf
        self.fGHz     = self.sf.x

        ygamma        = -1j*0.3/(4*np.pi*self.fGHz)
        self.gamm     = bs.FUsignal(x=self.fGHz,y=ygamma)
        self.sfg      = self.sf*self.gamm
        self.sfgh     = self.sfg.symH(0)
        self.stgh     = self.sfgh.ifft(1)</div>

<div class="viewcode-block" id="Waveform.info"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform.info">[docs]</a>    def info(self):
        &quot;&quot;&quot;  display information about waveform

        Results
        -------

        &gt;&gt;&gt; from pylayers.signal.waveform import *
        &gt;&gt;&gt; w = Waveform(typ=&#39;generic&#39;,WGHz=0.499,fcGHz=4.49,fsGHz=100,threshdB=3,twns=30)
        &gt;&gt;&gt; w.show()
        &gt;&gt;&gt; plt.show()


        &quot;&quot;&quot;
        if self[&#39;typ&#39;]==&#39;generic&#39;:
            for k in self.keys():
                print(k , &quot; : &quot;,self[k])
        else:
            print(&quot;typ:&quot;,self[&#39;typ&#39;])</div>


<div class="viewcode-block" id="Waveform.showpsd"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform.showpsd">[docs]</a>    def showpsd(self,Tpns=1000):
        &quot;&quot;&quot; show psd

        Parameters
        ----------

        Tpns : float

        &quot;&quot;&quot;
        plt.subplot(211)
        self.st.plot()
        plt.subplot(212)
        psd = self.st.psd(Tpns,50)
        plt.title(&#39;Tp = &#39;+str(Tpns)+&#39; ns&#39;)
        psd.plotdB(mask=True)</div>

<div class="viewcode-block" id="Waveform.ip_generic"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform.ip_generic">[docs]</a>    def ip_generic(self):
        &quot;&quot;&quot; Create an energy normalized Gaussian impulse (Usignal)

        ip_generic(self,parameters)


        &quot;&quot;&quot;
        Tw = self[&#39;twns&#39;]
        fcGHz = self[&#39;fcGHz&#39;]
        WGHz = self[&#39;WGHz&#39;]
        thresh = self[&#39;threshdB&#39;]
        fsGHz = self[&#39;fsGHz&#39;]
        ts = 1.0/fsGHz

        self[&#39;ts&#39;] = ts
        Np = fsGHz*Tw
        self[&#39;Np&#39;] = Np
        #x = np.linspace(-0.5*Tw+ts/2,0.5*Tw+ts/2,Np,endpoint=False)
        #x = arange(-Tw,Tw,ts)
        w = bs.TUsignal()
        w.EnImpulse(fcGHz=fcGHz,WGHz=WGHz,threshdB=thresh,fsGHz=fsGHz)
        #W = w.ft()
        W = w.ft()
        return (w,W)</div>

<div class="viewcode-block" id="Waveform.ref156"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform.ref156">[docs]</a>    def ref156(self,beta=0.5):
        &quot;&quot;&quot; reference pulse of IEEE 802.15.6 UWB standard

        Parameters
        ----------

        beta : float
            roll-off factor
        Tns = 1/499.2MHz

        Notes
        -----

        From P8O2.15.6/D02 December 2010  Formula 96 p 215

        &quot;&quot;&quot;
        Tw = self[&#39;twns&#39;]
        fs = self[&#39;fsGHz&#39;]
        Np = Tw*fs
        Ts = 1./fs
        beta = 0.5
        Tns = 1./0.4992
        x = np.linspace(-0.5*Tw+Ts/2, 0.5*Tw+Ts/2, Np, endpoint=False)
        z = x/Tns
        t1 = np.sin(np.pi*(1-beta)*z)
        t2 = np.cos(np.pi*(1+beta)*z)
        t3 = (np.pi*z)*(1-(4*beta*z)**2)
        y = (t1 + 4*beta*z*t2)/t3

        st = bs.TUsignal()
        st.x = x
        st.y = y[None,:]
        sf = st.ftshift()

        return(st,sf)</div>


<div class="viewcode-block" id="Waveform.fromfile"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform.fromfile">[docs]</a>    def fromfile(self):
        &quot;&quot;&quot; get the measurement waveform from WHERE1 measurement campaign

        This function is not yet generic

        &gt;&gt;&gt; from pylayers.signal.waveform import *
        &gt;&gt;&gt; wav = Waveform(typ=&#39;W1compensate&#39;)
        &gt;&gt;&gt; wav.show()

        &quot;&quot;&quot;

        M = mesuwb.UWBMeasure(1,h=1)
        w = bs.TUsignal()

        ts = M.RAW_DATA.timetx[0]
        tns = ts*1e9
        ts = tns[1]-tns[0]

        y  = M.RAW_DATA.tx[0]

        # find peak position  u is the index of the peak
        # yap :after peak
        # ybp : before peak
        # yzp : zero padding
        maxy = max(y)
        u = np.where(y ==maxy)[0][0]
        yap = y[u:]
        ybp = y[0:u]

        yzp = np.zeros(len(yap)-len(ybp)-1)

        tnsp = np.arange(0, tns[-1]-tns[u]+0.5*ts, ts)
        tnsm = np.arange(-(tns[-1]-tns[u]), 0, ts)

        y = np.hstack((yzp, np.hstack((ybp, yap))))
        tns = np.hstack((tnsm, tnsp))

        #
        # Warning (check if 1/sqrt(30) is not applied elsewhere
        #
        w.x = tns
        w.y = y[None,:]*(1/np.sqrt(30))

        #  w : TUsignal
        #  W : FUsignal (Hermitian redundancy removed)

        W   = w.ftshift()
        return (w,W)</div>

<div class="viewcode-block" id="Waveform.fromfile2"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform.fromfile2">[docs]</a>    def fromfile2(self):
        &quot;&quot;&quot;
        get the measurement waveform from WHERE1 measurement campaign

        This function is not yet generic

        &gt;&gt;&gt; from pylayers.signal.waveform import *
        &gt;&gt;&gt; wav = Waveform(typ=&#39;W1offset&#39;)
        &gt;&gt;&gt; wav.show()

        &quot;&quot;&quot;
        M = mesuwb.UWBMeasure(1,1)
        w = bs.TUsignal()

        ts = M.RAW_DATA.timetx[0]
        tns = ts*1e9
        Ts = tns[1]-tns[0]

        y  = M.RAW_DATA.tx[0]

        # find peak position  u is the index of the peak
        # yap :after peak
        # ybp : before peak
        # yzp : zero padding
#        maxy = max(y)
#        u = np.where(y ==maxy)[0][0]
#        yap = y[u:]
#        ybp = y[0:u]

        yzp = np.zeros(len(y)-1)

#        tnsp = np.arange(0,tns[-1]-tns[u]+0.5*ts,ts)
#        tnsm = np.arange(-(tns[-1]-tns[u]),0,ts)
        N = len(ts)-1
        tnsm = np.linspace(-tns[-1],-Ts,N)
        y = np.hstack((yzp,y))
        tns = np.hstack((tnsm,tns))

        #
        # Warning (check if 1/sqrt(30) is not applied elsewhere
        #
        w.x = tns
        w.y = (y*(1/np.sqrt(30)))[None,:]

        #  w : TUsignal
        #  W : FUsignal (Hermitian redundancy removed)
        W   = w.ftshift()
        return (w,W)</div>


<div class="viewcode-block" id="Waveform.read"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform.read">[docs]</a>    def read(self,config):
        &quot;&quot;&quot;
        Parameters
        ----------

        config : ConfigParser object

        Returns
        -------
        w      : waveform

        &quot;&quot;&quot;

        par = config.items(&quot;waveform&quot;)
        for k in range(len(par)):
            key = par[k][0]
            val = par[k][1]
            if key == &quot;WGHz&quot;:
                self[key] = float(val)
            if key == &quot;fcGHz&quot;:
                self[key] = float(val)
            if key == &quot;feGHz&quot;:
                self[key] = float(val)
            if key == &quot;threshdB&quot;:
                self[key] = float(val)
            if key == &quot;twns&quot;:
                self[key] = float(val)
            if key == &quot;typ&quot;:
                self[key] = val

        self.eval()</div>

<div class="viewcode-block" id="Waveform.bandwidth"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform.bandwidth">[docs]</a>    def bandwidth(self,th_ratio=10000,Npt=100):
        &quot;&quot;&quot; Determine effective bandwidth of the waveform.

        Parameters
        ----------

        th_ratio : float
            threshold ratio
            threshold = max(abs())/th_ratio
        Npt : Number of points

        &quot;&quot;&quot;
        u=np.where(np.abs(self.sf.y)&gt;np.max(np.abs(self.sf.y))/th_ratio)
        #fGHz = self.sf.x[u[1]]
        fGHz_start = self.sf.x[u[1]][0]
        fGHz_stop = self.sf.x[u[1]][-1]
        fGHz = np.linspace(fGHz_start,fGHz_stop,Npt)
        return fGHz</div>

<div class="viewcode-block" id="Waveform.gui"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform.gui">[docs]</a>    def gui(self):
        &quot;&quot;&quot;
        Get the Waveform parameter
        &quot;&quot;&quot;
        if self[&#39;typ&#39;] == &#39;generic&#39;:
            self.st.plot()
            show()
            wavegui = multenterbox(&#39;&#39;,&#39;Waveform Parameter&#39;,
            (&#39;Tw (ns) integer value&#39;,
             &#39;fc (GHz)&#39;,
             &#39;W (GHz)&#39;,
             &#39;thresh (dB)&#39;,
             &#39;fs (GHz) integer value&#39;),
            ( self[&#39;twns&#39;] ,
            self[&#39;fcGHz&#39;] ,
            self[&#39;WGHz&#39;] ,
            self[&#39;threshdB&#39;],
            self[&#39;feGHz&#39;]
            ))

            self.parameters[&#39;Twns&#39;]    = eval(wavegui[0])
            self.parameters[&#39;fcGHz&#39;]    = eval(wavegui[1])
            self.parameters[&#39;WGHz&#39;]  = eval(wavegui[2])
            self.parameters[&#39;threshdB&#39;] = eval(wavegui[3])
            self.parameters[&#39;fsGHz&#39;]    = eval(wavegui[4])

            [st,sf]       = self.ip_generic()
            self.st       = st
            self.sf       = sf
            st.plot()
            show()</div>

<div class="viewcode-block" id="Waveform.show"><a class="viewcode-back" href="../../../api/pylayers.signal.waveform.Waveform.html#pylayers.signal.waveform.Waveform.show">[docs]</a>    def show(self,fig=[]):
        &quot;&quot;&quot; show waveform in time and frequency domain

        Parameters
        ----------

        fig : figure

        &quot;&quot;&quot;
        # title construction
        if fig ==[]:
            fig = plt.figure()
        title =&#39;&#39;
        for pk in self.keys():
            val   = self[pk]
            title = title + pk + &#39;: &#39;
            if type(val) != &#39;str&#39;:
                title = title + str(val) + &#39; &#39;
        #plt.title(title)
        ax1 = fig.add_subplot(2,1,1)
        ax1.plot(self.st.x,self.st.y[0,:])
        plt.xlabel(&#39;time (ns)&#39;)
        plt.ylabel(&#39;level in linear scale&#39;)
        ax2 = fig.add_subplot(2,1,2)
        ax2.plot(self.sf.x,abs(self.sf.y[0,:]))
        plt.xlabel(&#39;frequency (GHz)&#39;)
        plt.ylabel(&#39;level in linear scale&#39;)
        fig.suptitle(title)</div></div>


if __name__ == &quot;__main__&quot;:
    plt.ion()
    doctest.testmod()
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, PyLayers developer team.
      Last updated on Jan 29, 2019.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          
          SphinxRtdTheme.Navigation.enableSticky();
          
      });
  </script> 

</body>
</html>