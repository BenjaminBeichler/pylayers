

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pylayers.exploit.simnet &mdash; PyLayers</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../../about.html" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Python
          

          
            
            <img src="../../../_static/pylayers.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../notebook/index.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_exLayout1.html">Loading an outdoor layout from its address</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_antenna.html">Antenna Pattern for an H plane sectoral antenna &#64; 32GHz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_exLayout2.html">Building graphs of a Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_coverage.html">Indoor Radio Coverage with Motley Keenan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_layout.html">8 Random Layout</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_issue314.html">Exemple of issue 314</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_exAbsGas.html">Attenuation due to atmospheric gases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_exDLink.html">Evaluation of a radio link DLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_w1.html">Indoor Radio Coverage FP7 WHERE1 M1 setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_exLuebbers.html">UWB Ray tracing simulation  in outdoor scenario</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_dakar.html">Outdoor Radio Coverage with Deygout Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_cover.html">Outdoor Radio Coverage with Deygout Method</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_diffraction_polar.html">Diffraction coefficient</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../auto_examples/plot_diffraction.html">Diffraction coefficient</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>pylayers.exploit.simnet</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pylayers.exploit.simnet</h1><div class="highlight"><pre>
<span></span>from pylayers.util import project
import pylayers.util.CDF as cdf
import pylayers.signal.bsignal as bs
import pylayers.gis.layout as ly
import pylayers.util.pyutil as pyu
import sys
if sys.version_info.major==2:
    import ConfigParser
else:
    import configparser as ConfgParser

import matplotlib.pylab as plt
import itertools
import pickle
import pdb


<div class="viewcode-block" id="Simnet2cir"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2cir.html#pylayers.exploit.simnet.Simnet2cir">[docs]</a>class Simnet2cir(object):
    &quot;&quot;&quot;
    Simnet2cir

    This class allows to perform a raytracing simulation from
    a simulnet simulation. First of using it, you MUST have run
    a simulnet simulation.

    Notes
    -----

    1) From your Project directory, configure simulnet.ini save section with:
    Save =[&#39;pyray&#39;]

    2) Run simulnet

    from pylayers.simul.simulnet import *
    S = Simul()
    S.runsimul()

    3) At the end of the simulnet simulation, a &#39;netsave&#39; folder has been
    created into your Pylayers project directory. This folder contains
    all required files for Simnet2cir computation

    4) Launch the Raytracing simulation from the pre-computed simulnet
    simulation:

    from pylayers.exploit.simnet import *
    E = Simnet2cir()
    E.compute() #

    5) See CIR results using pltciri or pltcir:

    &gt;&gt;&gt; E.pltcir(1,2,1)
    &gt;&gt;&gt; E.pltciri(1,2)

    &quot;&quot;&quot;
    def __init__(self,simnetfile=&#39;pyray.ini&#39;):
        self.simnetfile=simnetfile
        self.load()

<div class="viewcode-block" id="Simnet2cir.load"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2cir.html#pylayers.exploit.simnet.Simnet2cir.load">[docs]</a>    def load(self):
        &quot;&quot;&quot;
        Load simulnet_data configuration file
        &quot;&quot;&quot;
        if not os.path.isfile(pyu.getlong(self.simnetfile,pstruc[&#39;DIRNETSAVE&#39;])):
            raise NameError(self.simnetfile +&#39; cannot be reached.\
 Have you launch a simulnet simulation before ? \
 Please use \&#39;&gt;&gt;&gt; Simnet2cir?\&#39; to see help &#39;)
        self.simcfg = ConfigParser.ConfigParser()
        self.simcfg.read(pyu.getlong(self.simnetfile,pstruc[&#39;DIRNETSAVE&#39;]))
        self.Lfilename = self.simcfg.get(&#39;layout&#39;,&#39;layoutname&#39;)
        self.lAG = eval(self.simcfg.get(&#39;nodes&#39;,&#39;ag&#39;))
        self.lAP = eval(self.simcfg.get(&#39;nodes&#39;,&#39;ap&#39;))
        self.uptime = eval(self.simcfg.get(&#39;simulation&#39;,&#39;updatetime&#39;))
        # create a Simul object with the correct layout
        self.S = sime.Simul()
        self.S.layout(self.Lfilename,&#39;matDB.ini&#39;,&#39;slabDB.ini&#39;)
        self.lap = len(self.lAP)
        self.lag = len(self.lAG)

        self.L = self.S.L
        try:
            self.L.dumpr()
            print(&#39;Layout graphs are loaded from &#39;,basename,&#39;/struc&#39;)
        except:
        #self.L.sl = sl
        #self.L.loadGr(G1)
            print(&#39;First time your use the Layout.Graphs are curently build, it may take few minutes.&#39;)
            self.L.buildGt()
            self.L.dumpw()</div>



<div class="viewcode-block" id="Simnet2cir.compute"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2cir.html#pylayers.exploit.simnet.Simnet2cir.compute">[docs]</a>    def compute(self):
        &quot;&quot;&quot;
        Compute Raytracing simulation with the given simulation files
        &quot;&quot;&quot;
        #
        ### STEP 1 : all mobile node with all agent
        #

        self.S.clean_project(verbose=True)

        for apidx,ap in enumerate(self.lAP):
            self.S.tx = RadioNode(typ=&#39;tx&#39;,name=ap)
            self.S.tx.loadini(ap+&#39;.ini&#39;,rep=pstruc[&#39;DIRNETSAVE&#39;])
            for agidx,ag in enumerate(self.lAG):
                print(&#39;---------------------&#39;)
                print(&#39; Raytracing for :    &#39;)
                print(&#39; AP #&#39;,self.lAP[apidx-1] ,&#39; / AG #&#39;,ag)
                print(&#39;---------------------&#39;)
                print(&#39; Computed :&#39;)
                print(&#39;AP:&#39;,apidx-1,&#39;/&#39;,self.lap+1)
                print(&#39;AG:&#39;,agidx,&#39;/&#39;,self.lag)
                print(&#39;---------------------&#39;)
                self.S.rx = RadioNode(typ=&#39;rx&#39;,name=ag)
                self.S.rx.loadini(ag+&#39;.ini&#39;,rep=pstruc[&#39;DIRNETSAVE&#39;])
                self.S.run(apidx+1,range(1,self.S.rx.N+1))

        #### STEP 2 : all mobile/mobile

        icag = itertools.combinations(self.lAG,2)
        for cag in icag:
            self.S.tx = RadioNode(typ=&#39;tx&#39;,name=cag[0])
            self.S.tx.loadini(cag[0]+&#39;.ini&#39;,rep=pstruc[&#39;DIRNETSAVE&#39;])
            self.S.rx = RadioNode(typ=&#39;tx&#39;,name=cag[1])
            self.S.rx.loadini(cag[1]+&#39;.ini&#39;,rep=pstruc[&#39;DIRNETSAVE&#39;])
            lidxpts = range(1,self.S.rx.N+1)
            print(&#39;---------------------&#39;)
            print(&#39; Raytracing for :    &#39;)
            print(&#39; AG #&#39;, cag[0] ,&#39; / AG #&#39;,cag[1])
            print(&#39;---------------------&#39;)
            for n in lidxpts:
                print(&#39; trajectory point #&#39;,n,&#39;/&#39;,self.S.rx.N+1)
                print(&#39;---------------------&#39;)
                self.S.run(n,n)</div>


<div class="viewcode-block" id="Simnet2cir.pltcir"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2cir.html#pylayers.exploit.simnet.Simnet2cir.pltcir">[docs]</a>    def pltcir(self,itx,irx,pn,fig=[]):
        &quot;&quot;&quot;
            Plot channel impulse response for Tx,Rx and a specified position
            Parameters
            ----------
                itx : int
                    node number
                irx : int
                    node number
                pn : int
                    position index of the Rx

        &quot;&quot;&quot;
        if fig == []:
            fig = plt.figure(2)

        fig.clf()

        cir = TUsignal()
        spn = str(pn)
        line = &#39;defaultcir-&#39; +str(itx) +&#39;-&#39;+str(irx)+&#39;-p&#39;+spn.zfill(3)
        try:
            cir.readcir(line,str(itx))
        except:
            return False
        print(&#39;load : &#39;,line,&#39;.mat&#39;)
        cir.show(fig)
        return True</div>


<div class="viewcode-block" id="Simnet2cir.pltciri"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2cir.html#pylayers.exploit.simnet.Simnet2cir.pltciri">[docs]</a>    def pltciri(self,itx,irx):
        &quot;&quot;&quot;
        Plot channel impulse response interactiveley.
        diplay all node position of Tx and Rx and chose
        for which link you display the CIR.

        Once you have call self.pltciri(node1,node2)
        1) Press &#39;t&#39; on the displayed graph to chose the Tx
        2) Press &#39;x&#39; on the displayed graph to chose the Rx
        3) Press Enter to display CIR betwen Tx-Rx


        Parameters
        ----------
            itx : int
                node number
            irx : int
                node number

        usage

        &gt;&gt;&gt; W = W2()
        &gt;&gt;&gt; W.pltciri(6,1)

        &quot;&quot;&quot;
        plt.ion()
        fig1 = plt.figure(1)
        ax=fig1.add_subplot(111)
        self.ax2 = fig1.add_subplot(111)
        self.L.showG(fig=fig1,graph=&#39;&#39;)
        self.S.tx = RadioNode(typ=&#39;tx&#39;,name=itx)
        self.S.tx.loadini(str(itx)+&#39;.ini&#39;,rep=pstruc[&#39;DIRNETSAVE&#39;])
        self.S.rx = RadioNode(typ=&#39;rx&#39;,name=irx)
        self.S.rx.loadini(str(irx)+&#39;.ini&#39;,rep=pstruc[&#39;DIRNETSAVE&#39;])
        ax.plot(self.S.tx.position[0,:],self.S.tx.position[1,:],&#39;ob&#39;)
        ax.plot(self.S.rx.position[0,:],self.S.rx.position[1,:],&#39;or&#39;)
        plt.show()
        print(&#39;1. Press \&#39;t\&#39; and click to select a Tx &#39;)
        print(&#39;2. Press \&#39;x\&#39; and click to select a Rx &#39; )
        print(&#39;3. Press Enter to see the associated CIR &#39;)
        self.key=&#39;&#39;
        self.x1=&#39;&#39;
        self.x2=&#39;&#39;
        self.y1=&#39;&#39;
        self.y2=&#39;&#39;
        self.n1=&#39;&#39;
        self.n2=&#39;&#39;
        self.pos1=&#39;&#39;
        self.pos2=&#39;&#39;
        self.c1=[]
        self.c2=[]
        cid=fig1.canvas.mpl_connect(&#39;button_press_event&#39;, self.onclick)
        cid=fig1.canvas.mpl_connect(&#39;key_press_event&#39;, self.on_key)</div>

<div class="viewcode-block" id="Simnet2cir.onclick"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2cir.html#pylayers.exploit.simnet.Simnet2cir.onclick">[docs]</a>    def onclick(self,event):
        &quot;&quot;&quot;
            Events on click
        &quot;&quot;&quot;
        if event.button == 1:
            print (self.key)
            if self.key ==&#39;t&#39;:
                self.x1 = event.xdata
                self.y1 = event.ydata
                self.n1,self.pos1=self.srchpoint(self.x1,self.y1)
                print (&#39;select node1(Tx) # &#39;,self.n1,)
            if self.key ==&#39;x&#39;:
                self.x2 = event.xdata
                self.y2 = event.ydata
                self.n2,self.pos2=self.srchpoint(self.x2,self.y2)
                print (&#39;select node2(Rx) # &#39;,self.n2, &#39;, at position #&#39;, self.pos2+1)
            if self.key == &#39;enter&#39;:
                pass</div>



<div class="viewcode-block" id="Simnet2cir.on_key"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2cir.html#pylayers.exploit.simnet.Simnet2cir.on_key">[docs]</a>    def on_key(self,event):
        &quot;&quot;&quot;
            Events on key stroke
        &quot;&quot;&quot;
        if event.key == &#39;t&#39;:
            self.key = &#39;t&#39;
        if event.key == &#39;x&#39;:
            self.key = &#39;x&#39;
        if event.key == &#39;enter&#39;:
            inv=False
            case = &#39;&#39;
            if self.pos1 !=&#39;&#39; and self.pos2 !=&#39;&#39;:
                if self.n1 == self.n2:
                    print (&#39;ERROR :tx and rx on the same node&#39;)
                else :
                    if str(self.n1) in self.lAG and str(self.n2) in self.lAG:
                        upos = self.pos2[0]+1
                        case = &#39;2agents&#39;
                    elif str(self.n2) in self.lAP:
                        upos = self.pos1[0]+1
                    else :
                        upos = self.pos2[0]+1


                    if self.pltcir(self.n1,self.n2,upos):
                        pass
                    else:
                        self.pltcir(self.n2,self.n1,upos)
                        inv=True
                        print (inv)

                    ### manage black cross for involved nodes
                    try:
                        self.c1.pop(0).remove()
                        self.c2.pop(0).remove()
                    except:
                        pass
        
                    if case == &#39;2agents&#39;:
                    ### manage 2 mobile nodes
                        self.c1=self.ax2.plot(self.S.tx.position[0,upos-1],self.S.tx.position[1,upos-1],&#39;xk&#39;,ms=10.,mew=3.)
                        self.c2=self.ax2.plot(self.S.rx.position[0,upos-1],self.S.rx.position[1,upos-1],&#39;xk&#39;,ms=10.,mew=3.)
                    else:
                        if self.S.tx.N == 1:
                            self.c1=self.ax2.plot(self.S.tx.position[0,0],self.S.tx.position[1,0],&#39;xk&#39;,ms=10.,mew=3.)
                            self.c2=self.ax2.plot(self.S.rx.position[0,upos-1],self.S.rx.position[1,upos-1],&#39;xk&#39;,ms=10.,mew=3.)
                        else :
                            self.c1=self.ax2.plot(self.S.tx.position[0,upos-1],self.S.tx.position[1,upos-1],&#39;xk&#39;,ms=10.,mew=3.)
                            self.c2=self.ax2.plot(self.S.rx.position[0,0],self.S.rx.position[1,0],&#39;xk&#39;,ms=10.,mew=3.)</div>

#                    ### manage 2 mobile nodes to take position of the 2nd click
#                    if str(self.S.tx.name) in self.lAG and str(self.S.rx.name) in self.lAG :
#                        self.pos1 = self.pos2
#

<div class="viewcode-block" id="Simnet2cir.srchpoint"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2cir.html#pylayers.exploit.simnet.Simnet2cir.srchpoint">[docs]</a>    def srchpoint(self,x,y):
        &quot;&quot;&quot;
        Search from the closest point (x,y) into self.tx.position and self.rx.position

        Parameters
        ----------

        x :
        y :

        Returns
        -------

        N : int
            node ID
        pos : int
            index of the closest position

        &quot;&quot;&quot;
        t = self.S.tx.position[:2,:]
        r = self.S.rx.position[:2,:]
        p = np.array((x,y))
        d1 = np.sqrt(np.sum((t.T-p)**2,axis=1))
        d2 = np.sqrt(np.sum((r.T-p)**2,axis=1))
        d1m=np.min(d1)
        d2m=np.min(d2)
        if d1m &lt; d2m:
            n = self.S.tx.name
            pos = np.nonzero(d1==d1m)[0]
        else :
            n = self.S.rx.name
            pos = np.nonzero(d2==d2m)[0]
        return (n,pos)</div></div>
#cid = fig.canvas.mpl_connect(&#39;button_press_event&#39;, onclick)



<div class="viewcode-block" id="Simnet2loc"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2loc.html#pylayers.exploit.simnet.Simnet2loc">[docs]</a>class Simnet2loc(object):
    &quot;&quot;&quot; Simnet2loc

    Summary
    -------

    this class allows to plot cdf from localization obtained with
    simulet simulation

    Configure simulnet.ini save section with:
    Save =[&#39;loc&#39;]


    &quot;&quot;&quot;
    def __init__(self,savefile=&#39;save.pck&#39;):
        self.savefile=savefile
        self.load()

<div class="viewcode-block" id="Simnet2loc.load"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2loc.html#pylayers.exploit.simnet.Simnet2loc.load">[docs]</a>    def load(self):
        &quot;&quot;&quot;
        Load simulnet_data configuration file
        &quot;&quot;&quot;


        self.savefile
        self.file=open(basename+&#39;/&#39; + pstruc[&#39;DIRNETSAVE&#39;] +&#39;/&#39; +self.savefile,&#39;r&#39;)
        self.savemat=pickle.load(self.file)</div>


<div class="viewcode-block" id="Simnet2loc.CDF"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2loc.html#pylayers.exploit.simnet.Simnet2loc.CDF">[docs]</a>    def CDF(self,node=[&#39;1&#39;],method=[&#39;pe&#39;,&#39;pe_alg&#39;],filename=&#39;CDF&#39;):
        &quot;&quot;&quot;
        plot CDF from a saved simulation for a given node and for chosen algorithm

        &quot;&quot;&quot;

        methodname ={}

        for m in method:
            if m == &#39;pe&#39;:
                methodname[m]=&#39;Geometric&#39;
            elif m == &#39;pe_alg&#39;:
                methodname[m]=&#39;Algebraic&#39;

        self.error={}

        for n in node:
            L=[]
            leg=[]
            for m in method:
                try:
                    L.append(np.sqrt(np.sum(self.savemat[n][m]-self.savemat[n][&#39;p&#39;],axis=1)**2) )
                    leg.append(methodname[m])
                except:
                    print (&quot;given method is not save&quot;)
            self.error[n]=L
            lL=len(L)
            color=[&#39;k&#39;]*lL
            #MF=[500.,500.,500.,500.,500.,500.,500.,500.,500.,500.,500.,500.]
            MF=[100.,150.,400.,400.,400.,400.,400.,400.,400.]
            #color=[&#39;r&#39;,&#39;r&#39;,&#39;r&#39;,&#39;g&#39;,&#39;g&#39;,&#39;g&#39;,&#39;b&#39;,&#39;b&#39;,&#39;b&#39;]
            #### CDF RSSHT atteint ML
            Msize=[5,3,4,4,6,3,6,3,3,3,3]
            MS=[&#39;&#39;,&#39;&#39;,&#39;&#39;,&#39;o&#39;,&#39;^&#39;,&#39;*&#39;,&#39;v&#39;,&#39; &#39;,&#39;^&#39;,&#39;o&#39;,&#39; &#39;,&#39;^&#39;,&#39;o&#39;]
            MC=[&#39;w&#39;,&#39;w&#39;,&#39;w&#39;,&#39;w&#39;,&#39;w&#39;,&#39;w&#39;,&#39;w&#39;,&#39;w&#39;,&#39;w&#39;,&#39;w&#39;,&#39;w&#39;,&#39;w&#39;,&#39;w&#39;]
            LS=[&#39;-&#39;,&#39;--&#39;,&#39;:&#39;,&#39;-&#39;,&#39;-&#39;,&#39;-&#39;,&#39;-&#39;,&#39;-&#39;,&#39;-&#39;,&#39;--&#39;,&#39;--&#39;,&#39;--&#39;,&#39;-.&#39;,&#39;-.&#39;,&#39;-.&#39;,&#39;:&#39;,&#39;:&#39;,&#39;:&#39;]
            #color=[&#39;k&#39;]*lL
            color=[&#39;k&#39;,&#39;r&#39;,&#39;b&#39;,&#39;b&#39;,&#39;g&#39;,&#39;g&#39;,&#39;k&#39;,&#39;k&#39;,&#39;r&#39;,&#39;g&#39;,&#39;b&#39;,&#39;k&#39;,&#39;r&#39;,&#39;g&#39;,&#39;b&#39;,&#39;k&#39;]
            it=0
            lv=[]
            for i in range(lL):
                dx1 = {}
                dx1[&#39;values&#39;] = L[i]
                dx1[&#39;filename&#39;] = &#39;CDF&#39;
                dx1[&#39;bound&#39;]  = np.arange(0,10.,0.01)
                dx1[&#39;legend&#39;] =  leg[i]
                dx1[&#39;xlabel&#39;] = &#39;Positioning error [m]&#39;#r&quot;$ \| B - \hat{B} \| \quad [m]$&quot;
                dx1[&#39;ylabel&#39;] = &#39;Cumulative Probability&#39;#r&quot;$ Pr ( \| B - \hat{B} \| &lt; \epsilon)$&quot;
                dx1[&#39;title&#39;]  = &#39;CDF&#39;
                dx1[&#39;marker&#39;]  = MS[it]
                try:
                    dx1[&#39;markercolor&#39;]  = MC[it]
                except:
                    pass
                dx1[&#39;markersize&#39;]  = Msize[i]
                dx1[&#39;markerfrequency&#39;]  = MF[it]
                dx1[&#39;line&#39;]  = LS[it]
                dx1[&#39;color&#39;]  = color[it]
                dx1[&#39;linewidth&#39;]  = 1.
            #	if nb_rss[i/4]==3 :
                lv.append(dx1)
                it=it+1
            #	lv.append(dx1)

            cdf  = cdf.CDF(lv,filename=basename + &#39;/&#39; +pstruc[&#39;DIRNETSAVE&#39;] +&#39;/&#39;+filename)
            cdf.show()</div>


<div class="viewcode-block" id="Simnet2loc.trajectory"><a class="viewcode-back" href="../../../api/pylayers.exploit.simnet.Simnet2loc.html#pylayers.exploit.simnet.Simnet2loc.trajectory">[docs]</a>    def trajectory(self,node=&#39;1&#39;, L=ly.Layout(&#39;WHERE1.lay&#39;)):
        &quot;&quot;&quot; plot a trajectory of a node on a given structure , from a save simulation file

        Parameters
        ----------

        node : string
        L    : pylayers.gis.layout.Layout


        &quot;&quot;&quot;
        L.dumpr()
        pa=[]
        for p in self.savemat.keys():
            try:
                if self.savemat[p][&#39;type&#39;]==&#39;ap&#39;:
                    pa.append(self.savemat[p][&#39;p&#39;][0])
            except:
                pass

        pa=np.array(pa)
        f=plt.figure()
        ax=f.add_subplot(111)
        f,ax=L.showG(&#39;&#39;,fig=f,ax=ax)

        P=self.savemat[node][&#39;p&#39;]
        label=np.arange(len(P))
        ax.scatter(pa[:,0],pa[:,1],color=&#39;r&#39;,s=4)
        ax.scatter(P[:,0],P[:,1],color=&#39;g&#39;,s=3)
        plt.show()</div></div>


#        self.simcfg = ConfigParser.ConfigParser()
#        self.simcfg.read(pyu.getlong(self.simnetfile,pstruc[&#39;DIRNETSAVE&#39;]))
#        self.Lfilename = self.simcfg.get(&#39;layout&#39;,&#39;layoutname&#39;)
#        self.lAG = eval(self.simcfg.get(&#39;nodes&#39;,&#39;ag&#39;))
#        self.lAP = eval(self.simcfg.get(&#39;nodes&#39;,&#39;ap&#39;))
#        self.uptime = eval(self.simcfg.get(&#39;simulation&#39;,&#39;updatetime&#39;))
#        # create a Simul object with the correct layout
#        self.S = Simul()
#        self.S.layout(self.Lfilename,&#39;matDB.ini&#39;,&#39;slabDB.ini&#39;)
#        self.lap = len(self.lAP)
#        self.lag = len(self.lAG)

#        self.L = self.S.L
#        try:
#            self.L.dumpr()
#            print &#39;Layout graphs are loaded from &#39;,basename,&#39;/struc&#39;
#        except:
#        #self.L.sl = sl
#        #self.L.loadGr(G1)           
#            print &#39;First time your use the Layout.Graphs are curently build, it may take few minutes.&#39;
#            self.L.buildGt()
#            self.L.dumpw()




</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, PyLayers developer team
      <span class="lastupdated">
        Last updated on Apr 02, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>